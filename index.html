<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—…ä¼´ Go! V10.0 (æ‰‹æ©ŸåŸç”Ÿé«”é©—ç‰ˆ)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* === å…¨å±€è¨­å®š === */
        :root { --primary: #4285F4; --bg: #f8f9fa; --card-bg: #ffffff; }
        body { font-family: 'Noto Sans TC', sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; color: #333; overflow: hidden; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        /* === ä½ˆå±€å®¹å™¨ === */
        .app-container { display: flex; width: 100%; height: 100%; flex-direction: column; }

        /* === å´é‚Šæ¬„ (é›»è…¦ç‰ˆé¡¯ç¤ºï¼Œæ‰‹æ©Ÿç‰ˆéš±è—) === */
        .sidebar {
            width: 280px; background: white; border-right: 1px solid #eee; display: none; /* é è¨­éš±è— */
            flex-direction: column; padding: 20px;
        }
        .sidebar h2 { margin-top: 0; color: var(--primary); }
        .sidebar-days { flex: 1; overflow-y: auto; margin-top: 20px; }
        .sidebar-btn { 
            display: block; width: 100%; padding: 12px 15px; border: none; background: transparent; 
            text-align: left; cursor: pointer; border-radius: 8px; font-size: 16px; color: #555; margin-bottom: 5px;
        }
        .sidebar-btn.active { background: #e8f0fe; color: var(--primary); font-weight: bold; }

        /* === é ‚éƒ¨å°èˆª (æ‰‹æ©Ÿç‰ˆå°ˆç”¨) === */
        .mobile-header {
            background: white; padding: 15px; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); z-index: 10;
        }
        .app-title { font-weight: bold; font-size: 1.2em; color: var(--primary); margin: 0; }
        .trip-code { font-size: 0.8em; color: #999; background: #f1f3f4; padding: 4px 8px; border-radius: 12px; }

        /* === æ©«å‘æ»‘å‹•å¤©æ•¸åˆ— (æ‰‹æ©Ÿç‰ˆæ ¸å¿ƒ) === */
        .mobile-days-bar {
            display: flex; overflow-x: auto; background: white; padding: 10px 15px;
            border-bottom: 1px solid #eee; white-space: nowrap; gap: 10px;
            -webkit-overflow-scrolling: touch; /* iOS æ»‘å‹•æ…£æ€§ */
            scrollbar-width: none; /* Firefox éš±è—æ²è»¸ */
        }
        .mobile-days-bar::-webkit-scrollbar { display: none; } /* Chrome éš±è—æ²è»¸ */

        .day-pill {
            display: inline-block; padding: 8px 16px; border-radius: 20px;
            background: #f1f3f4; color: #666; font-size: 0.95em; cursor: pointer;
            transition: 0.2s; border: 1px solid transparent; flex-shrink: 0;
        }
        .day-pill.active {
            background: var(--primary); color: white; box-shadow: 0 2px 6px rgba(66,133,244,0.3);
        }

        /* === åˆ—è¡¨å€åŸŸ === */
        .main-content { flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 100px; position: relative; }

        /* === è¡Œç¨‹å¡ç‰‡ (å„ªåŒ–ç‰ˆ) === */
        .spot-card {
            background: var(--card-bg); border-radius: 16px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.06); margin-bottom: 0;
            display: flex; overflow: hidden; border: 1px solid #f0f0f0;
            position: relative; z-index: 2;
        }
        .time-col {
            width: 75px; background: #e8f0fe; color: #1967d2;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 10px; font-weight: 700; font-size: 0.95em; text-align: center;
            border-right: 1px solid #dbeafe;
        }
        .info-col { flex: 1; padding: 15px; display: flex; flex-direction: column; justify-content: center; min-width: 0; }
        .spot-title { font-size: 1.1em; font-weight: bold; color: #333; margin-bottom: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        .badges { display: flex; gap: 6px; flex-wrap: wrap; }
        .badge { font-size: 0.8em; padding: 3px 8px; border-radius: 6px; background: #f5f5f5; color: #666; display: flex; align-items: center; gap: 4px; }
        .badge.stay { background: #e0f2f1; color: #00695c; }
        .badge.note { background: #fff3e0; color: #ef6c00; max-width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* === æ“ä½œæŒ‰éˆ• (å³å´ç›´æ¢) === */
        .actions-col { width: 45px; border-left: 1px solid #f0f0f0; display: flex; flex-direction: column; }
        .act-btn { flex: 1; border: none; background: white; color: #ccc; font-size: 1.1em; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .act-btn:active { background: #f0f0f0; color: var(--primary); }
        .act-btn.del:active { color: #d32f2f; background: #ffebee; }

        /* === äº¤é€šé€£æ¥ç·š (è¦–è¦ºåŒ–) === */
        .transport-connector {
            display: flex; align-items: center; justify-content: center;
            padding: 12px 0; position: relative;
        }
        .transport-connector::before {
            content: ''; position: absolute; top: 0; bottom: 0; left: 37px; /* å°é½Šå¡ç‰‡æ™‚é–“è»¸ */
            width: 2px; background: repeating-linear-gradient(to bottom, #ddd 0, #ddd 6px, transparent 6px, transparent 12px);
            z-index: 0;
        }
        .transport-pill {
            background: white; border: 1px solid #eee; padding: 4px 12px; border-radius: 20px;
            font-size: 0.85em; color: #666; position: relative; z-index: 1;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03); display: flex; align-items: center; gap: 6px;
        }
        .transport-pill i { color: var(--primary); }

        /* === æ‡¸æµ®æ–°å¢æŒ‰éˆ• (FAB) === */
        .fab-btn {
            position: absolute; bottom: 25px; right: 25px;
            width: 60px; height: 60px; border-radius: 50%;
            background: var(--primary); color: white; border: none;
            box-shadow: 0 4px 15px rgba(66,133,244,0.4); font-size: 28px;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            transition: transform 0.2s; z-index: 100;
        }
        .fab-btn:active { transform: scale(0.9); }

        /* === åº•éƒ¨æ»‘å‡ºè¦–çª— (Bottom Sheet Modal) === */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 999; opacity: 0; transition: opacity 0.3s;
        }
        .modal-sheet {
            position: fixed; bottom: -100%; left: 0; width: 100%;
            background: white; border-radius: 20px 20px 0 0;
            padding: 25px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 1000; transition: bottom 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
            max-height: 90vh; overflow-y: auto;
        }
        .modal-active .modal-overlay { display: block; opacity: 1; }
        .modal-active .modal-sheet { bottom: 0; }

        /* è¡¨å–®æ¨£å¼ */
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9em; font-weight: bold; color: #555; margin-bottom: 5px; }
        input, select {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;
            font-size: 16px; background: #fff; appearance: none;
        }
        .row { display: flex; gap: 10px; }
        .col { flex: 1; }

        .btn-full { width: 100%; padding: 14px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-cancel { background: #f1f3f4; color: #333; margin-top: 10px; }
        .btn-map { background: #e8f0fe; color: var(--primary); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 8px;}

        /* === æ­¡è¿é  === */
        #landing { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; text-align: center; }
        .landing-input { width: 100%; max-width: 300px; padding: 15px; font-size: 18px; text-align: center; border: 2px solid #eee; border-radius: 12px; margin-bottom: 15px; }

        /* === RWD: é›»è…¦ç‰ˆèª¿æ•´ === */
        @media (min-width: 769px) {
            .app-container { flex-direction: row; }
            .sidebar { display: flex; } /* é¡¯ç¤ºå´é‚Šæ¬„ */
            .mobile-header, .mobile-days-bar { display: none; } /* éš±è—æ‰‹æ©Ÿå°èˆª */
            .modal-sheet { width: 400px; left: 50%; bottom: 50%; transform: translate(-50%, 50%); border-radius: 16px; }
            .modal-active .modal-sheet { bottom: 50%; }
        }
    </style>
</head>
<body>

    <div id="landing">
        <h1 style="color:var(--primary); font-size: 2.5em; margin-bottom: 10px;">æ—…ä¼´ Go!</h1>
        <p style="color:#888; margin-bottom: 40px;">è¼¸å…¥ä»£ç¢¼ï¼Œé–‹å§‹æ‚¨çš„æ—…ç¨‹</p>
        <input type="text" id="codeEnter" class="landing-input" placeholder="è¡Œç¨‹ä»£ç¢¼ (6ç¢¼)">
        <button class="btn-full btn-primary" style="max-width:300px;" onclick="loadByCode()">è¼‰å…¥è¡Œç¨‹</button>
        <button class="btn-full btn-cancel" style="max-width:300px;" onclick="createNew()">å»ºç«‹æ–°è¡Œç¨‹</button>
    </div>

    <div class="app-container" id="app" style="display:none;">
        
        <div class="sidebar">
            <h2 id="pcTripTitle">è¼‰å…¥ä¸­...</h2>
            <div id="pcDayList" class="sidebar-days"></div>
            <button class="btn-full btn-cancel" onclick="logout()">é€€å‡º</button>
        </div>

        <div style="flex:1; display:flex; flex-direction:column; height:100%;">
            
            <div class="mobile-header">
                <h3 class="app-title" id="mobileTripTitle">è¡Œç¨‹åç¨±</h3>
                <span class="trip-code" id="mobileCode" onclick="copyCode()">ä»£ç¢¼: ---</span>
            </div>

            <div class="mobile-days-bar" id="mobileDayList">
                </div>

            <div class="main-content" id="listArea">
                <div style="text-align:center; margin-top:50px; color:#ccc;">
                    <i class="fas fa-spinner fa-spin"></i> è®€å–ä¸­...
                </div>
            </div>

            <button class="fab-btn" onclick="openModal()">
                <i class="fas fa-plus"></i>
            </button>
        </div>
    </div>

    <div id="modalOverlay" class="modal-overlay" onclick="closeModal()"></div>
    <div id="modalSheet" class="modal-sheet">
        <h3 style="margin-top:0; color:var(--primary);">ğŸ“ ç·¨è¼¯è¡Œç¨‹</h3>
        <input type="hidden" id="editId">

        <button class="btn-full btn-map" id="routeBtn" onclick="openGoogleMapsRoute()" style="display:none;">
            <i class="fas fa-map-marked-alt"></i> é–‹å•Ÿ Google Maps å°èˆª
        </button>

        <div class="form-group">
            <label>åœ°é»åç¨±</label>
            <input type="text" id="locInput" placeholder="ä¾‹å¦‚ï¼šæ¸…æ°´å¯º">
        </div>

        <div class="row form-group">
            <div class="col">
                <label>åˆ°é”æ™‚é–“</label>
                <input type="time" id="timeInput">
            </div>
            <div class="col">
                <label>åœç•™(åˆ†)</label>
                <input type="number" id="durationInput" placeholder="60">
            </div>
        </div>

        <div class="form-group">
            <label>äº¤é€šæ–¹å¼ (å‰å¾€æ­¤è™•)</label>
            <div class="row">
                <div class="col" style="flex:2;">
                    <select id="transportInput">
                        <option value="ç„¡">ç„¡</option>
                        <option value="é–‹è»Š">ğŸš— é–‹è»Š</option>
                        <option value="å¤§çœ¾é‹è¼¸">ğŸš† å¤§çœ¾é‹è¼¸</option>
                        <option value="æ­¥è¡Œ">ğŸš¶ æ­¥è¡Œ</option>
                        <option value="å–®è»Š">ğŸš² å–®è»Š</option>
                    </select>
                </div>
                <div class="col" style="flex:1;">
                    <input type="number" id="travelTimeInput" placeholder="è»Šç¨‹(åˆ†)">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>å‚™è¨»</label>
            <input type="text" id="noteInput" placeholder="ç¥¨åƒ¹ã€è¨‚ä½ä»£è™Ÿ...">
        </div>

        <button class="btn-full btn-primary" onclick="saveItem()">å„²å­˜</button>
        <button class="btn-full btn-cancel" onclick="closeModal()">å–æ¶ˆ</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDoc, doc, query, where, onSnapshot, setDoc, serverTimestamp, updateDoc, deleteDoc } 
        from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBYUTADnEjSDMd__T7n8xsoY5LFUn9qlDw",
            authDomain: "gogo-252ba.firebaseapp.com",
            projectId: "gogo-252ba",
            storageBucket: "gogo-252ba.firebasestorage.app",
            messagingSenderId: "599210924514",
            appId: "1:599210924514:web:15e78eb22c2b355e9b81bb",
            measurementId: "G-3VJRC7WZQB"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        let currentTripId = localStorage.getItem('lastTripId');
        let currentDay = 1;
        let unsubscribe = null;
        let currentData = [];

        // è‡ªå‹•ç™»å…¥æª¢æŸ¥
        if(currentTripId) {
            document.getElementById('codeEnter').value = currentTripId;
            getDoc(doc(db, "trips", currentTripId)).then(snap => {
                if(snap.exists()) initApp(snap.data());
                else document.getElementById('landing').style.display = 'flex';
            });
        }

        window.loadByCode = async () => {
            const code = document.getElementById('codeEnter').value;
            const snap = await getDoc(doc(db, "trips", code));
            if(snap.exists()) {
                currentTripId = code;
                localStorage.setItem('lastTripId', code);
                initApp(snap.data());
            } else alert("æ‰¾ä¸åˆ°ä»£ç¢¼");
        }

        window.createNew = async () => {
            const name = prompt("æ—…ç¨‹åç¨± (å¦‚ï¼šæ±äº¬5æ—¥éŠ)");
            const days = prompt("å¤©æ•¸ (æ•¸å­—)", "5");
            if(name && days) {
                const id = Math.floor(100000 + Math.random()*900000).toString();
                await setDoc(doc(db, "trips", id), { name, days: parseInt(days), createdAt: serverTimestamp() });
                currentTripId = id;
                localStorage.setItem('lastTripId', id);
                initApp({ name, days: parseInt(days) });
            }
        }

        function initApp(data) {
            document.getElementById('landing').style.display = 'none';
            document.getElementById('app').style.display = 'flex';
            
            // æ›´æ–°æ¨™é¡Œ
            document.getElementById('mobileTripTitle').innerText = data.name;
            document.getElementById('pcTripTitle').innerText = data.name;
            document.getElementById('mobileCode').innerText = `ä»£ç¢¼: ${currentTripId}`;

            // ç”Ÿæˆå¤©æ•¸é¸å–® (åŒæ™‚ç”Ÿæˆé›»è…¦ç‰ˆå’Œæ‰‹æ©Ÿç‰ˆ)
            renderDayNav(data.days);
            
            // é è¨­è¼‰å…¥ç¬¬1å¤©
            changeDay(1);
        }

        function renderDayNav(totalDays) {
            const pcList = document.getElementById('pcDayList');
            const mobileList = document.getElementById('mobileDayList');
            pcList.innerHTML = '';
            mobileList.innerHTML = '';

            for(let i=1; i<=totalDays; i++) {
                // é›»è…¦ç‰ˆå´é‚Šæ¬„æŒ‰éˆ•
                pcList.innerHTML += `<button id="pc-day-${i}" class="sidebar-btn" onclick="changeDay(${i})">Day ${i}</button>`;
                // æ‰‹æ©Ÿç‰ˆè† å›ŠæŒ‰éˆ•
                mobileList.innerHTML += `<div id="mobile-day-${i}" class="day-pill" onclick="changeDay(${i})">Day ${i}</div>`;
            }
        }

        window.changeDay = (d) => {
            currentDay = d;
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹ (é›»è…¦ + æ‰‹æ©Ÿ)
            document.querySelectorAll('.sidebar-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.day-pill').forEach(b => b.classList.remove('active'));
            
            const pcBtn = document.getElementById(`pc-day-${d}`);
            const mobileBtn = document.getElementById(`mobile-day-${d}`);
            if(pcBtn) pcBtn.classList.add('active');
            if(mobileBtn) {
                mobileBtn.classList.add('active');
                // æ‰‹æ©Ÿç‰ˆè‡ªå‹•æ²å‹•åˆ°é¸ä¸­çš„æŒ‰éˆ•
                mobileBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }

            listenData();
        }

        function formatDuration(m) {
            if(!m) return "";
            const h = Math.floor(m / 60);
            const min = m % 60;
            return h > 0 ? `${h}æ™‚${min}åˆ†` : `${min}åˆ†é˜`;
        }

        function listenData() {
            if(unsubscribe) unsubscribe();
            const q = query(collection(db, "items"), where("tripId", "==", currentTripId));
            
            unsubscribe = onSnapshot(q, (snapshot) => {
                const listDiv = document.getElementById('listArea');
                listDiv.innerHTML = "";
                currentData = [];

                snapshot.forEach(doc => {
                    const data = doc.data();
                    if(data.day == currentDay) currentData.push({ id: doc.id, ...data });
                });

                currentData.sort((a, b) => (a.time || "23:59").localeCompare(b.time || "23:59"));

                if(currentData.length === 0) {
                    listDiv.innerHTML = "<div style='text-align:center;color:#ccc;margin-top:50px;'><i class='fas fa-map-signs' style='font-size:3em;opacity:0.3;'></i><br><br>é€™è£¡é‚„æ²’æœ‰è¡Œç¨‹<br>é»å³ä¸‹è§’ + æ–°å¢</div>";
                    return;
                }

                currentData.forEach((item, index) => {
                    // 1. äº¤é€šé€£æ¥å™¨
                    if (index > 0 && item.transport && item.transport !== 'ç„¡') {
                        let icon = 'fas fa-arrow-down';
                        if(item.transport.includes('é–‹è»Š')) icon = 'fas fa-car';
                        else if(item.transport.includes('å¤§çœ¾')) icon = 'fas fa-subway';
                        else if(item.transport.includes('æ­¥')) icon = 'fas fa-walking';
                        
                        let timeHtml = item.travelDuration ? `<span>â±ï¸ ${formatDuration(item.travelDuration)}</span>` : '';
                        
                        listDiv.innerHTML += `
                            <div class="transport-connector">
                                <div class="transport-pill">
                                    <i class="${icon}"></i> ${item.transport} ${timeHtml}
                                </div>
                            </div>`;
                    }

                    // 2. å¡ç‰‡å…§å®¹
                    const stayHtml = item.duration ? `<span class="badge stay"><i class="far fa-clock"></i> åœ ${formatDuration(item.duration)}</span>` : '';
                    const noteHtml = item.note ? `<span class="badge note"><i class="far fa-sticky-note"></i> ${item.note}</span>` : '';

                    listDiv.innerHTML += `
                        <div class="spot-card">
                            <div class="time-col">
                                <div>${item.time || "--:--"}</div>
                            </div>
                            <div class="info-col">
                                <div class="spot-title">${item.location}</div>
                                <div class="badges">${stayHtml}${noteHtml}</div>
                            </div>
                            <div class="actions-col">
                                <button class="act-btn" onclick="openModal('${item.id}')"><i class="fas fa-pen"></i></button>
                                <button class="act-btn del" onclick="delItem('${item.id}')"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    `;
                });
            });
        }

        // Modal æ“ä½œ
        window.openModal = (id = null) => {
            const overlay = document.getElementById('modalOverlay');
            const sheet = document.getElementById('modalSheet');
            const routeBtn = document.getElementById('routeBtn');
            
            document.body.classList.add('modal-active');
            document.getElementById('editId').value = id || "";

            if(id) {
                const item = currentData.find(x => x.id === id);
                document.getElementById('locInput').value = item.location;
                document.getElementById('timeInput').value = item.time;
                document.getElementById('durationInput').value = item.duration || "";
                document.getElementById('transportInput').value = item.transport || "ç„¡";
                document.getElementById('travelTimeInput').value = item.travelDuration || "";
                document.getElementById('noteInput').value = item.note || "";
                routeBtn.style.display = 'none'; // ä¿®æ”¹æ™‚ä¸é¡¯ç¤ºå°èˆªæŒ‰éˆ• (é¿å…æ··äº‚)
            } else {
                ['locInput','timeInput','durationInput','noteInput','travelTimeInput'].forEach(i => document.getElementById(i).value = '');
                document.getElementById('transportInput').value = "ç„¡";
                
                // æ™ºæ…§å°èˆªæŒ‰éˆ•
                if(currentData.length > 0) {
                    routeBtn.style.display = 'flex';
                    window.lastLoc = currentData[currentData.length - 1].location;
                } else {
                    routeBtn.style.display = 'none';
                }
            }
        }

        window.closeModal = () => {
            document.body.classList.remove('modal-active');
        }

        window.openGoogleMapsRoute = () => {
            const current = document.getElementById('locInput').value;
            let url = `https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(window.lastLoc)}`;
            if(current) url += `&destination=${encodeURIComponent(current)}`;
            window.open(url, '_blank');
        }

        window.saveItem = async () => {
            const id = document.getElementById('editId').value;
            const data = {
                tripId: currentTripId,
                day: parseInt(currentDay),
                location: document.getElementById('locInput').value,
                time: document.getElementById('timeInput').value,
                duration: document.getElementById('durationInput').value,
                transport: document.getElementById('transportInput').value,
                travelDuration: document.getElementById('travelTimeInput').value,
                note: document.getElementById('noteInput').value
            };
            if(!data.location) return alert("åœ°é»å¿…å¡«");
            
            if(id) await updateDoc(doc(db, "items", id), data);
            else await addDoc(collection(db, "items"), { ...data, createdAt: serverTimestamp() });
            
            closeModal();
        }

        window.delItem = async (id) => { if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) await deleteDoc(doc(db, "items", id)); }
        window.logout = () => { localStorage.removeItem('lastTripId'); location.reload(); }
        window.copyCode = () => { navigator.clipboard.writeText(currentTripId).then(()=>alert("ä»£ç¢¼å·²è¤‡è£½")); }
        
        // Export
        window.changeDay = changeDay;
        window.openModal = openModal;
        window.closeModal = closeModal;
        window.saveItem = saveItem;
        window.delItem = delItem;
        window.openGoogleMapsRoute = openGoogleMapsRoute;
        window.loadByCode = loadByCode;
        window.createNew = createNew;
        window.logout = logout;
        window.copyCode = copyCode;
    </script>
</body>
</html>
